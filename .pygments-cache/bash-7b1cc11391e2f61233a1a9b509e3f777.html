<div class="highlight"><pre><span class="nv">$ </span>cat &gt; consul.yml <span class="s">&lt;&lt; EOF</span>
<span class="s">version: &#39;3.3&#39;</span>

<span class="s">services:</span>
<span class="s">  consul:</span>
<span class="s">    image: progrium/consul</span>
<span class="s">    command: -server -bootstrap -log-level debug -ui-dir /ui</span>
<span class="s">    networks:</span>
<span class="s">      - appnet</span>
<span class="s">    deploy:</span>
<span class="s">      placement:</span>
<span class="s">        constraints: [node.role == manager]</span>
<span class="s">    volumes:</span>
<span class="s">      - type: bind</span>
<span class="s">        source: /mnt/consul</span>
<span class="s">        target: /data</span>
<span class="s">    ports:</span>
<span class="s">      - &quot;8400:8400&quot;</span>
<span class="s">      - &quot;8500:8500&quot;</span>
<span class="s">      - &quot;8600:53/udp&quot;</span>

<span class="s">networks:</span>
<span class="s">  appnet:</span>
<span class="s">    external: true</span>

<span class="s">EOF</span>
</pre></div>