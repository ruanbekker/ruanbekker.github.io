<div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>

<span class="nv">mongo_user</span><span class="o">=</span>&lt;mongouser&gt;
<span class="nv">mongo_pass</span><span class="o">=</span>&lt;mongopass&gt;

<span class="k">for</span> file in <span class="sb">`</span>ls <span class="p">|</span> grep bson<span class="sb">`</span>
  <span class="k">do</span>
    <span class="k">for</span> collection in <span class="sb">`</span><span class="nb">echo</span> <span class="nv">$file</span> <span class="p">|</span> sed <span class="s1">&#39;s/.bson//g&#39;</span><span class="sb">`</span>
  <span class="k">do</span>
    mongorestore --host mymongoid.mlab.com --port <span class="m">12345</span> -u <span class="nv">$mongo_user</span> -p <span class="nv">$mongo_pass</span> -d rocketchat -c <span class="nv">$collection</span> <span class="nv">$file</span>
    sleep 2
  <span class="k">done</span>
<span class="k">done</span>
</pre></div>