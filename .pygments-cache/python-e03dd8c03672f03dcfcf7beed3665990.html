<div class="highlight"><pre><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">urllib</span>

<span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="n">req</span><span class="p">):</span>
    <span class="n">urlstring</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">&#39;payload=&#39;</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">urlstring</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&quot;attachments&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&quot;replace_original&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="s">&quot;response_type&quot;</span><span class="p">:</span> <span class="s">&quot;ephemeral&quot;</span><span class="p">,</span>
                <span class="s">&quot;fallback&quot;</span><span class="p">:</span> <span class="s">&quot;Required plain-text summary of the attachment.&quot;</span><span class="p">,</span>
                <span class="s">&quot;color&quot;</span><span class="p">:</span> <span class="s">&quot;#36a64f&quot;</span><span class="p">,</span>
                <span class="s">&quot;pretext&quot;</span><span class="p">:</span> <span class="s">&quot;Ahh yeah! Great choice, OpenFaas is absolutely brilliant!&quot;</span><span class="p">,</span>
                <span class="s">&quot;author_name&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
                <span class="s">&quot;author_link&quot;</span><span class="p">:</span> <span class="s">&quot;https://github.com/openfaas/faas&quot;</span><span class="p">,</span>
                <span class="s">&quot;author_icon&quot;</span><span class="p">:</span> <span class="s">&quot;http://flickr.com/icons/bobby.jpg&quot;</span><span class="p">,</span>
                <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="s">&quot;OpenFaas&quot;</span><span class="p">,</span>
                <span class="s">&quot;title_link&quot;</span><span class="p">:</span> <span class="s">&quot;https://github.com/openfaas/faas&quot;</span><span class="p">,</span>
                <span class="s">&quot;text&quot;</span><span class="p">:</span> <span class="s">&quot;Head over to OpenFaas&quot;</span><span class="p">,</span>
                <span class="s">&quot;image_url&quot;</span><span class="p">:</span> <span class="s">&quot;https://avatars2.githubusercontent.com/u/27013154?s=400&amp;v=4&quot;</span><span class="p">,</span>
                <span class="s">&quot;thumb_url&quot;</span><span class="p">:</span> <span class="s">&quot;https://github.com/openfaas/faas&quot;</span><span class="p">,</span>
                <span class="s">&quot;footer&quot;</span><span class="p">:</span> <span class="s">&quot;Slack Apps built on OpenFaas&quot;</span><span class="p">,</span>
                <span class="s">&quot;footer_icon&quot;</span><span class="p">:</span> <span class="s">&quot;https://a.slack-edge.com/45901/marketing/img/_rebrand/meta/slack_hash_256.png&quot;</span><span class="p">,</span>
                <span class="s">&quot;ts&quot;</span><span class="p">:</span> <span class="mi">123456789</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>