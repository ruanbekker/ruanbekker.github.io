<div class="highlight"><pre><span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="s">&#39;3&#39;</span>

<span class="l-Scalar-Plain">services</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">registry.gitlab.com/&lt;user&gt;/&lt;repo&gt;/&lt;image&gt;:&lt;tag&gt;</span>
    <span class="l-Scalar-Plain">networks</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">appnet</span>
    <span class="l-Scalar-Plain">deploy</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">labels</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;traefik.port=8080&quot;</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;traefik.docker.network=appnet&quot;</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;traefik.frontend.rule=Host:apps.mydomain.com;</span><span class="nv"> </span><span class="s">PathPrefix:</span><span class="nv"> </span><span class="s">/hello/&quot;</span>
      <span class="l-Scalar-Plain">mode</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">replicated</span>
      <span class="l-Scalar-Plain">replicas</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
      <span class="l-Scalar-Plain">placement</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">constraints</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="s">&#39;node.role==worker&#39;</span>

<span class="l-Scalar-Plain">networks</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">appnet</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">external</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>