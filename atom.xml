<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Ruan Bekker's Blog]]></title>
  <link href="http://ruanbekker.github.io/atom.xml" rel="self"/>
  <link href="http://ruanbekker.github.io/"/>
  <updated>2017-08-24T09:40:04-04:00</updated>
  <id>http://ruanbekker.github.io/</id>
  <author>
    <name><![CDATA[Ruan]]></name>
    <email><![CDATA[ruan@ruanbekker.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Create a ZFS Raidz1 Volume Pool on Ubuntu 16]]></title>
    <link href="http://ruanbekker.github.io/blog/2017/08/24/create-a-zfs-raidz1-volume-pool-on-ubuntu-16/"/>
    <updated>2017-08-24T09:16:34-04:00</updated>
    <id>http://ruanbekker.github.io/blog/2017/08/24/create-a-zfs-raidz1-volume-pool-on-ubuntu-16</id>
    <content type="html"><![CDATA[<p>Setting up ZFS Volume Pool on Ubuntu 16.04</p>

<h2>Installation</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo apt-get install zfsutils-linux -y</span></code></pre></td></tr></table></div></figure>


<h2>Creating the ZFS Storage Pool</h2>

<p>We will create a RAIDZ(1) Volume which is like Raid5 with Single Parity, so we can lose one of the Physical Disks before Raid failure.</p>

<p>Let&rsquo;s first have a look at our disks that we have on our server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lsblk
</span><span class='line'>NAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
</span><span class='line'>xvda    202:0    0   8G  0 disk
</span><span class='line'>└─xvda1 202:1    0   8G  0 part /
</span><span class='line'>xvdf    202:80   0 100G  0 disk 
</span><span class='line'>xvdg    202:80   0 100G  0 disk </span></code></pre></td></tr></table></div></figure>


<p>So we will be creating the volume consisting of <code>/dev/xvdf</code> and <code>/dev/xvdg</code> and we will name our pool: <code>storage-pool</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ zpool create storage-pool raidz1 xvdf xvdg -f</span></code></pre></td></tr></table></div></figure>


<h2>Listing Pools</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ zpool list
</span><span class='line'>NAME           SIZE  ALLOC   FREE  EXPANDSZ   FRAG    CAP  DEDUP  HEALTH  ALTROOT
</span><span class='line'>storage-pool   199G   125K   199G         -     0%     0%  1.00x  ONLINE  -</span></code></pre></td></tr></table></div></figure>


<p>We can also list the volume with <code>zfs</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ zfs list
</span><span class='line'>NAME            USED  AVAIL  REFER  MOUNTPOINT
</span><span class='line'>storage-pool    125K  199G   19K    /storage-pool</span></code></pre></td></tr></table></div></figure>


<h2>Mounting the Volume:</h2>

<p>You will find that the volume is already mounted:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ df -h
</span><span class='line'>Filesystem      Size  Used Avail Use% Mounted on
</span><span class='line'>/dev/xvda1      7.7G  1.1G  6.7G  14% /
</span><span class='line'>pool            199G  125K  198G   1% /pool</span></code></pre></td></tr></table></div></figure>


<h2>Resources:</h2>

<p>See how Brett Kelly from 45 Drives tried to break a Storage Cluster with GlusterFS and ZFS:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/A0wV4k58RIs" frameborder="0" allowfullscreen></iframe>


<p><img src="https://www.youtube.com/watch?v=A0wV4k58RIs" alt="" /></p>

<p>Great ZFS Performance Comparison:
- <a href="https://calomel.org/zfs_raid_speed_capacity.html">https://calomel.org/zfs_raid_speed_capacity.html</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup MongoDB Client on CentOS 6]]></title>
    <link href="http://ruanbekker.github.io/blog/2017/08/24/setup-mongodb-client-on-centos-6/"/>
    <updated>2017-08-24T08:58:10-04:00</updated>
    <id>http://ruanbekker.github.io/blog/2017/08/24/setup-mongodb-client-on-centos-6</id>
    <content type="html"><![CDATA[<p>I have a bastion host that is still running CentOS6 and epel repos provides mongodb-shell version 2.x and Mlab requires version 3.x</p>

<h2>Setup the Repositories</h2>

<p>Create the repository:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ cat &gt; /etc/yum.repos.d/mongodb.repo &lt;&lt; EOF
</span><span class='line'>[mongodb-org-3.4]
</span><span class='line'>name=MongoDB Repository
</span><span class='line'>baseurl=https://repo.mongodb.org/yum/redhat/\$releasever/mongodb-org/3.4/x86_64/
</span><span class='line'>gpgcheck=1
</span><span class='line'>enabled=1
</span><span class='line'>gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc
</span><span class='line'>EOF</span></code></pre></td></tr></table></div></figure>


<p>Update the repository index:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yum update -y</span></code></pre></td></tr></table></div></figure>


<h2>Install MongoDB-Shell</h2>

<p>Install the MongoDB Shell Client:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo yum install mongodb-shell -y</span></code></pre></td></tr></table></div></figure>


<h2>Connect to your Remote MongoDB Instance:</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mongo remotedb.mlab.com:27017/&lt;dbname&gt; -u &lt;user&gt; -p &lt;pass&gt;</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello]]></title>
    <link href="http://ruanbekker.github.io/blog/2017/08/24/hello/"/>
    <updated>2017-08-24T08:37:21-04:00</updated>
    <id>http://ruanbekker.github.io/blog/2017/08/24/hello</id>
    <content type="html"><![CDATA[<p>Hello everyone, so I decided that I will pusblish anything that catches my curiosity on this blog which is proudly hosted on Github.</p>

<h3>Resources:</h3>

<ul>
<li><p><a href="http://samwize.com/2012/09/11/how-to-setup-octopress-on-github-pages/">http://samwize.com/2012/09/11/how-to-setup-octopress-on-github-pages/</a></p></li>
<li><p><a href="http://octopress.org/docs/setup/">http://octopress.org/docs/setup/</a></p></li>
</ul>

]]></content>
  </entry>
  
</feed>
