
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ruan Bekker's Blog</title>
  <meta name="author" content="Ruan">

  
  <meta name="description" content="So I got 3 Dedicated Servers each having its own Static IP and I wanted a way to build a private network between these servers. The Scenario: 3 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- font awesome --!>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <!-- samwize.com/2012/09/24/octopress-table-stylesheet --!>
  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />

  
  <link rel="canonical" href="https://blog.ruanbekker.com/posts/24/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ruan Bekker's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-105336110-1']);
    _gaq.push(['_setDomainName','ruanbekker.com']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <script async defer data-website-id="2cfa7c36-c1f7-48fd-949c-2e5e8a1d873d" src="https://umami-analytics.ruan.dev/umami.js"></script>

  <!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1100086574264181"
     crossorigin="anonymous"></script>

  <!-- Twitter cards # www.brianbunke.com/blog/2017/09/06/twitter-cards-on-jekyll -->
<meta name="twitter:site"    content="@ruanbekker">
<meta name="twitter:creator" content="@">
<meta name="twitter:title"   content="">


<meta name="twitter:description" content="">



<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/567298/69000657-c093e780-08db-11ea-8464-bcd3023e9923.png">

<!-- end of Twitter cards -->

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ruan Bekker's Blog</a></h1>
  
    <h2>From a Curious mind to Posts on Github</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://blog.ruanbekker.com/search/" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="blog.ruanbekker.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories/aws/">AWS</a></li>
  <li><a href="/blog/categories/docker/">Docker</a></li>
  <li><a href="/blog/categories/devops/">DevOps</a></li>
  <li><a href="/blog/categories/python/">Python</a></li>
  <li><a target="_blank" href="https://sysadmins.co.za">My Sysadmins Blog</a></li>
  <li><a href="https://ruan.dev/">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/06/02/setup-a-peer-to-peer-vpn-with-vpncloud-on-ubuntu/">Setup a Peer to Peer VPN With VPNCloud on Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-06-02T14:15:33-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2018</span></span> <span class='time'>2:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So I got 3 Dedicated Servers each having its own Static IP and I wanted a way to build a private network between these servers.</p>

<script id="mNCC" language="javascript">
    medianet_width = "728";
    medianet_height = "90";
    medianet_crid = "218284798";
    medianet_versionId = "3111299"; 
  </script>


<script src="//contextual.media.net/nmedianet.js?cid=8CUD78FSV"></script>


<h2>The Scenario:</h2>

<p>3 Servers with the following IP&rsquo;s (not real IP addresses):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- Server 1: 52.1.99.10
</span><span class='line'>- Server 2: 52.1.84.20
</span><span class='line'>- Server 3: 52.1.49.30</span></code></pre></td></tr></table></div></figure>


<p>So I want to have a private network, so that I can have the following internal network:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- Server 1: 10.0.1.1
</span><span class='line'>- Server 2: 10.0.1.2
</span><span class='line'>- Server 3: 10.0.1.3</span></code></pre></td></tr></table></div></figure>


<p>A couple of years ago, I accomplished the end goal using GRE Tunnels, which works well, but wanted to try something different.</p>

<h2>VPNCloud</h2>

<p>So I stumbled upon VPNCloud.rs, which is a peer to peer VPN. Their description, quoted from their Github page:</p>

<p>&ldquo;VpnCloud is a simple VPN over UDP. It creates a virtual network interface on the host and forwards all received data via UDP to the destination. VpnCloud establishes a fully-meshed VPN network in a peer-to-peer manner. It can work on TUN devices (IP based) and TAP devices (Ethernet based).&rdquo;</p>

<p>This is exactly what I was looking for.</p>

<h2>Setting up a 3 node Private Network:</h2>

<p>Given the IP configuration above, we will setup a Private network between our 3 hosts.</p>

<p>Do some updates then grab the package from <a href="https://github.com/dswd/vpncloud.rs/releases">Github</a> and install VPNCloud:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>apt update <span class="o">&amp;&amp;</span> apt ugprade -y
</span><span class='line'><span class="nv">$ </span>wget https://github.com/dswd/vpncloud.rs/releases/download/v0.8.1/vpncloud_0.8.1_amd64.deb
</span><span class='line'><span class="nv">$ </span>dpkg -i ./vpncloud_0.8.1_amd64.deb
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s start the configuration on Server-1, this config should also be setup on the other 2 servers, the config will remain the same, except for the <code>ifup</code> command. The other servers will look like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Server-2: -&gt; ifup: <span class="s2">&quot;ifconfig $IFNAME 10.0.1.2/24 mtu 1400&quot;</span>
</span><span class='line'>Server-3: -&gt; ifup: <span class="s2">&quot;ifconfig $IFNAME 10.0.1.3/24 mtu 1400&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Getting back to the Server-1 config:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim /etc/vpncloud/private.net
</span></code></pre></td></tr></table></div></figure>


<p>Example Config that I am using:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># each vpn running on their own port</span>
</span><span class='line'>port: 3210
</span><span class='line'>
</span><span class='line'><span class="c"># members of our private network</span>
</span><span class='line'>peers:
</span><span class='line'>  - srv2.domain.com:3210
</span><span class='line'>  - srv3.domain.com:3210
</span><span class='line'>
</span><span class='line'><span class="c"># timeouts</span>
</span><span class='line'>peer_timeout: 1800
</span><span class='line'>dst_timeout: 300
</span><span class='line'>
</span><span class='line'><span class="c"># token that identifies the network and helps to distinguish from other networks</span>
</span><span class='line'>magic: <span class="s2">&quot;76706e01&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># pre shared key</span>
</span><span class='line'>shared_key: <span class="s2">&quot;VeryStrongPreSharedKey_ThatShouldBeChanged&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># encryption</span>
</span><span class='line'>crypto: aes256
</span><span class='line'>
</span><span class='line'><span class="c"># device info</span>
</span><span class='line'>device_name: <span class="s2">&quot;vpncloud%d&quot;</span>
</span><span class='line'>device_type: tap
</span><span class='line'>
</span><span class='line'><span class="c"># vpn modes: hub / switch / router / normal</span>
</span><span class='line'>mode: normal
</span><span class='line'>
</span><span class='line'><span class="c"># subnet to be used for our private network</span>
</span><span class='line'>subnets:
</span><span class='line'>  - 10.0.1.0/24
</span><span class='line'>
</span><span class='line'><span class="c"># command to setup the network</span>
</span><span class='line'>ifup: <span class="s2">&quot;ifconfig $IFNAME 10.0.1.1/24 mtu 1400&quot;</span>
</span><span class='line'>ifdown: <span class="s2">&quot;ifconfig $IFNAME down&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># user/group owning the process</span>
</span><span class='line'>user: <span class="s2">&quot;root&quot;</span>
</span><span class='line'>group: <span class="s2">&quot;root&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Repeat the config on the other servers.</p>

<h2>Start the VPN Service:</h2>

<p>Restart the VPNCloud Service on all the Servers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>service vpncloud@private start
</span></code></pre></td></tr></table></div></figure>


<p>Check the status:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>service vpncloud@private status
</span></code></pre></td></tr></table></div></figure>


<p>Check if the interface is up:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ifconfig vpncloud0
</span><span class='line'>vpncloud0 Link encap:Ethernet  HWaddr aa:bb:cc:dd:ee:ff
</span><span class='line'>          inet addr:10.0.1.1  Bcast:10.0.1.255  Mask:255.255.255.0
</span><span class='line'>          UP BROADCAST RUNNING MULTICAST  MTU:1400  Metric:1
</span><span class='line'>          RX packets:55 errors:0 dropped:0 overruns:0 frame:0
</span><span class='line'>          TX packets:71 errors:0 dropped:0 overruns:0 carrier:0
</span><span class='line'>          collisions:0 txqueuelen:1000
</span><span class='line'>          RX bytes:5046 <span class="o">(</span>5.0 KB<span class="o">)</span>  TX bytes:5526 <span class="o">(</span>5.5 KB<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ping the 3rd server via the private network:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ping -c <span class="m">3</span> 10.0.1.3
</span><span class='line'>PING 10.0.1.2 <span class="o">(</span>10.0.1.3<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span><span class='line'><span class="m">64</span> bytes from 10.0.1.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nb">time</span><span class="o">=</span>0.852 ms
</span><span class='line'><span class="m">64</span> bytes from 10.0.1.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nb">time</span><span class="o">=</span>0.831 ms
</span><span class='line'><span class="m">64</span> bytes from 10.0.1.3: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nb">time</span><span class="o">=</span>0.800 ms
</span><span class='line'>
</span><span class='line'>--- 10.0.1.3 ping statistics ---
</span><span class='line'><span class="m">3</span> packets transmitted, <span class="m">3</span> received, 0% packet loss, <span class="nb">time </span>2028ms
</span><span class='line'>rtt min/avg/max/mdev <span class="o">=</span> 0.800/0.827/0.852/0.039 ms
</span></code></pre></td></tr></table></div></figure>


<p>Awesome service, please check their <a href="https://github.com/dswd/vpncloud.rs">Github Repo</a> out.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/06/01/add-a-authentication-header-to-your-python-flask-app/">Add a Authentication Header to Your Python Flask App</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-06-01T03:28:05-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2018</span></span> <span class='time'>3:28 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://user-images.githubusercontent.com/567298/53351527-18dc2100-392a-11e9-9e50-48f738046a68.jpg" alt="" /></p>

<p>We will write a simple Python Flask application that requires authentication in order to respond with a 200 HTTP Status code.</p>

<h2>Python Flask Application:</h2>

<p>Our Python Flask application will require the Header <code>x-api-key dhuejso2dj3d0</code> in the HTTP Request, to give us a 200 HTTP Status code, if not, we will respond with a 401 Unauthorized Response:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
</span><span class='line'>
</span><span class='line'><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
</span><span class='line'>    <span class="n">headers</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">headers</span>
</span><span class='line'>    <span class="n">auth</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;X-Api-Key&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">auth</span> <span class="o">==</span> <span class="s">&#39;asoidewfoef&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">&quot;message&quot;</span><span class="p">:</span> <span class="s">&quot;OK: Authorized&quot;</span><span class="p">}),</span> <span class="mi">200</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">&quot;message&quot;</span><span class="p">:</span> <span class="s">&quot;ERROR: Unauthorized&quot;</span><span class="p">}),</span> <span class="mi">401</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>To get the headers, you can use <code>headers.get("X-Api-Key")</code> or <code>headers["X-Api-Key"]</code></p>

<p>Create a virtual environment, install flask and run the app:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>virtualenv .venv
</span><span class='line'><span class="nv">$ </span><span class="nb">source</span> .venv/bin/activate
</span><span class='line'><span class="nv">$ </span>python app.py
</span><span class='line'> * Serving Flask app <span class="s2">&quot;app&quot;</span> <span class="o">(</span>lazy loading<span class="o">)</span>
</span><span class='line'> * Environment: production
</span><span class='line'>   WARNING: Do not use the development server in a production environment.
</span><span class='line'>   Use a production WSGI server instead.
</span><span class='line'> * Debug mode: off
</span><span class='line'> * Running on http://127.0.0.1:5000/ <span class="o">(</span>Press CTRL+C to quit<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Requests to our App:</h2>

<p>Let&rsquo;s first make a request with no headers, which should then give us a 401 Unautorhized response:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -i http://localhost:5000
</span><span class='line'>
</span><span class='line'>HTTP/1.0 <span class="m">401</span> UNAUTHORIZED
</span><span class='line'>Content-Type: application/json
</span><span class='line'>Content-Length: 33
</span><span class='line'>Server: Werkzeug/0.14.1 Python/3.6.5
</span><span class='line'>Date: Fri, <span class="m">01</span> Jun <span class="m">2018</span> 07:26:25 GMT
</span><span class='line'>
</span><span class='line'><span class="o">{</span><span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;ERROR: Unauthorized&quot;</span><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Now let&rsquo;s include the authentication token in our headers. If the string is the same as the one in the code, we should see a 200 HTTP Response:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -i -H <span class="s1">&#39;x-api-key: asoidewfoef&#39;</span> http://localhost:5000
</span><span class='line'>
</span><span class='line'>HTTP/1.0 <span class="m">200</span> OK
</span><span class='line'>Content-Type: application/json
</span><span class='line'>Content-Length: 29
</span><span class='line'>Server: Werkzeug/0.14.1 Python/3.6.5
</span><span class='line'>Date: Fri, <span class="m">01</span> Jun <span class="m">2018</span> 07:27:03 GMT
</span><span class='line'>
</span><span class='line'><span class="o">{</span><span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;OK: Authorized&quot;</span><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Note:</h2>

<p>From a best practice, its not a good decision to hard code sensitive details in your code, but rather read that from an encrypted database and store that in your applications environment variables, and let your application read from the environment variables, something like that :D</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/06/01/clearing-up-disk-space-on-docker-swarm-by-removing-unused-data-with-prune/">Clearing Up Disk Space on Docker Swarm by Removing Unused Data With Prune</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-06-01T02:19:21-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2018</span></span> <span class='time'>2:19 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://user-images.githubusercontent.com/567298/53351889-85572000-392a-11e9-9720-464e9318206e.jpg" alt="" /></p>

<p>After some time, your system can run out of disk space when running a lot of containers / volumes etc. You will find that at times, you will have a lot of unused containers, stopped containers, unused images, unused networks that is just sitting there, which consumes data on your nodes.</p>

<p>One way to clean them is by using <code>docker system prune</code>.</p>

<h2>Check Docker Disk Space</h2>

<p>The command below will show the amount of disk space consumed, and how much is reclaimable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker system df
</span><span class='line'>TYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE
</span><span class='line'>Images              <span class="m">229</span>                 <span class="m">125</span>                 23.94GB             14.65GB <span class="o">(</span>61%<span class="o">)</span>
</span><span class='line'>Containers          <span class="m">322</span>                 <span class="m">16</span>                  8.229GB             8.222GB <span class="o">(</span>99%<span class="o">)</span>
</span><span class='line'>Local Volumes       <span class="m">77</span>                  <span class="m">41</span>                  698MB               19.13MB <span class="o">(</span>2%<span class="o">)</span>
</span><span class='line'>Build Cache                                                 0B                  0B
</span></code></pre></td></tr></table></div></figure>


<h2>Removing Unsued Data:</h2>

<p>By using Prune, we can remove the unused resources that is consuming data:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker system prune
</span><span class='line'>
</span><span class='line'>WARNING! This will remove:
</span><span class='line'>        - all stopped containers
</span><span class='line'>        - all networks not used by at least one container
</span><span class='line'>        - all dangling images
</span><span class='line'>        - all build cache
</span><span class='line'>Are you sure you want to <span class="k">continue</span>? <span class="o">[</span>y/N<span class="o">]</span> y
</span><span class='line'>
</span><span class='line'>Deleted Containers:
</span><span class='line'>a3d7db158e065d0c86160fd5d688875f8b7435848ea91db57ed007
</span><span class='line'>47890dcfea4a105f43e790dd8ad3c6d7c4ad7e738186c034d7a46b
</span><span class='line'>
</span><span class='line'>Deleted Networks:
</span><span class='line'>traefik-net
</span><span class='line'>app_appnet
</span><span class='line'>
</span><span class='line'>Deleted Images:
</span><span class='line'>deleted: sha256:5b9909c10e93afec
</span><span class='line'>deleted: sha256:d81eesdfihweo3rk
</span><span class='line'>
</span><span class='line'>Total reclaimed space: 14.18GB
</span></code></pre></td></tr></table></div></figure>


<p>For related <a href="https://goo.gl/L2NYxU">Docker</a> posts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/31/ssh-tools-that-comes-in-handy-when-dealing-with-multiple-servers/">SSH Tools That Comes in Handy When Dealing With Multiple Servers</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-31T05:18:11-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2018</span></span> <span class='time'>5:18 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://objects.ruanbekker.com/assets/images/header-ssh-tips.png" alt="" /></p>

<p>When dealing with a lot of servers where you need to ssh to different servers and especially if they require different authentication from different private ssh keys, it kinda gets annoying specifying the private key you need, when you want to SSH to them.</p>

<h2>SSH Config</h2>

<p>SSH Config: <code>~/.ssh/config</code> is powerful!</p>

<p>In this config file, you can specify the remote host, the key, user and the alias, so that when you want to SSH to it, you dont have to use the fully qualified domain name or IP address.</p>

<p>Let&rsquo;s take for example our server-a with the following details:</p>

<ul>
<li>FQDN: host1.eu.compute.domain.coom</li>
<li>User: james</li>
<li>PrivateKeyFile: /path/to/key.pem</li>
<li>Disable Strict Host Checking</li>
</ul>


<p>So to access that host, you would use the following command (without ssh config):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh -oStrictHostKeyChecking<span class="o">=</span>no -oUserKnownHostsFile<span class="o">=</span>/dev/null -i /path/to/key.pem james@host1.eu.compute.domain.com
</span></code></pre></td></tr></table></div></figure>


<p>Now with SSH Config, open up the config file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim ~/.ssh/config
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>and declare the host details:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Host host1
</span><span class='line'>  Hostname host1.eu.compute.domain.com
</span><span class='line'>  User james
</span><span class='line'>  IdentityFile /path/to/key.pem
</span><span class='line'>  StrictHostKeyChecking no
</span><span class='line'>  UserKnownHostsFile /dev/null
</span></code></pre></td></tr></table></div></figure>


<p>Now, if we need to SSH to it, we can do it as simply as:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh host1
</span></code></pre></td></tr></table></div></figure>


<p>as it will pull in the configs from the config that is described from the host alias that you calling from the argument of the ssh binary.</p>

<h2>SSH Timeout</h2>

<p>Appending to our SSH Config, we can configure either our client or server to prevent SSH Timeouts due to inactivity.</p>

<ul>
<li>SSH Timeout on our Client:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim ~/.ssh/config
</span></code></pre></td></tr></table></div></figure>


<p>Here we can set how often a NULL Packet is sent to the SSH Connections to keep the connection alive, in this case every 120 seconds:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ServerAliveInterval 120
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>SSH Timeout on the Servers:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vim /etc/ssh/sshd_config
</span></code></pre></td></tr></table></div></figure>


<p>Below we have 2 properties, the interval of how often to instruct the client connected to send a NULL packet to keep the connection alive and the max number of intervals, so for a idle connection to timeout in 24 hours, we will take 86400 seconds which is 24 hours, divide into 120 second intervals, which gives as 720 intervals.</p>

<p>So the config will look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>ClientAliveInterval 120
</span><span class='line'>ClientAliveCountMax 720
</span></code></pre></td></tr></table></div></figure>


<p>The restart the sshd service:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>/etc/init.d/sshd restart
</span></code></pre></td></tr></table></div></figure>


<h2>SSH Agent</h2>

<p>Another handy tool is <code>ssh-agent</code>, if you have password encryption on your key, everytime you need to ssh, a password will be prompted. A way to get around this is to use the ssh-agent.</p>

<p>We also want to set a TTL to the ssh-agent, as we don&rsquo;t want it to run forever (unless you want it to). In this case I will let the ssh-agent exit after 2 hours. It will also only run in the shell session from where you execute it. Lets start up our ssh-agent:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">eval</span> <span class="k">$(</span>ssh-agent -t 7200<span class="k">)</span>
</span><span class='line'>Agent pid <span class="m">88760</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now add the private key to the ssh-agent. If your private key is password protected, it will prompt you for the password and after successful verification the key will be added:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh-add /path/to/key.pem
</span><span class='line'>Identity added: /path/to/key.pem <span class="o">(</span>/path/to/key.pem<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Multiple Github Accounts:</h2>

<p>Here is a great post on how to work with different GitHub Accounts:
- <a href="https://gist.github.com/jexchan/2351996">https://gist.github.com/jexchan/2351996</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/28/wildcard-ssl-certificate-with-letsencrypt-on-docker-swarm-using-traefik/">Wildcard SSL Certificate With Letsencrypt on Docker Swarm Using Traefik</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-28T17:36:17-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>5:36 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://user-images.githubusercontent.com/567298/53352817-2d211d80-392c-11e9-93f4-b3284f0b6c20.jpg" alt="" /></p>

<p>With Letsencrypt supporting Wildcard certificates is really awesome. Now, we can setup traefik to listen on 443, acting as a reverse proxy and is doing HTTPS Termination to our Applications thats running in our Swarm.</p>

<h2>Architectural Design:</h2>

<p>At the moment we have 3 Manager Nodes, and 5 Worker Nodes:</p>

<ul>
<li>Using a Dummy Domain example.com which is set to the 3 Public IP&rsquo;s of our Manager Nodes</li>
<li>DNS is set for: <code>example.com</code> A Record to: <code>52.10.1.10</code>, <code>52.10.1.11</code>, <code>52.10.1.12</code></li>
<li>DNS is set for: <code>*.example.com</code> CNAME to <code>example.com</code></li>
<li>Any application that is spawned into our Swarm, will be labeled with a <code>traefik.frontend.rule</code> which will be routed to the service and redirected from HTTP to HTTPS</li>
</ul>


<h2>Create the Overlay Network:</h2>

<p>Create the overlay network that will be used for our stack:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker network create --driver overlay appnet
</span></code></pre></td></tr></table></div></figure>


<h2>Create the Compose Files for our Stacks:</h2>

<p>Create the Traefik Service Compose file, we will deploy it in Global Mode, constraint to our Manager Nodes, so that every manager node has a copy of traefik running.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cat &gt; traefik-compose.yml <span class="s">&lt;&lt; EOF</span>
</span><span class='line'>
</span><span class='line'><span class="s">version: &quot;3.4&quot;</span>
</span><span class='line'><span class="s">services:</span>
</span><span class='line'><span class="s">  proxy:</span>
</span><span class='line'><span class="s">    image: traefik:latest</span>
</span><span class='line'><span class="s">    command:</span>
</span><span class='line'><span class="s">      - &quot;--api&quot;</span>
</span><span class='line'><span class="s">      - &quot;--entrypoints=Name:http Address::80 Redirect.EntryPoint:https&quot;</span>
</span><span class='line'><span class="s">      - &quot;--entrypoints=Name:https Address::443 TLS&quot;</span>
</span><span class='line'><span class="s">      - &quot;--defaultentrypoints=http,https&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme.storage=/etc/traefik/acme/acme.json&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme.entryPoint=https&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme.httpChallenge.entryPoint=http&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme.onHostRule=true&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme.onDemand=false&quot;</span>
</span><span class='line'><span class="s">      - &quot;--acme.email=me@example.com&quot;</span>
</span><span class='line'><span class="s">      - &quot;--docker&quot;</span>
</span><span class='line'><span class="s">      - &quot;--docker.swarmMode&quot;</span>
</span><span class='line'><span class="s">      - &quot;--docker.domain=example.com&quot;</span>
</span><span class='line'><span class="s">      - &quot;--docker.watch&quot;</span>
</span><span class='line'><span class="s">    volumes:</span>
</span><span class='line'><span class="s">      - /var/run/docker.sock:/var/run/docker.sock</span>
</span><span class='line'><span class="s">      - /mnt/traefik/acme.json:/etc/traefik/acme/acme.json</span>
</span><span class='line'><span class="s">    networks:</span>
</span><span class='line'><span class="s">      - appnet</span>
</span><span class='line'><span class="s">    ports:</span>
</span><span class='line'><span class="s">      - target: 80</span>
</span><span class='line'><span class="s">        published: 80</span>
</span><span class='line'><span class="s">        mode: host</span>
</span><span class='line'><span class="s">      - target: 443</span>
</span><span class='line'><span class="s">        published: 443</span>
</span><span class='line'><span class="s">        mode: host</span>
</span><span class='line'><span class="s">      - target: 8080</span>
</span><span class='line'><span class="s">        published: 8080</span>
</span><span class='line'><span class="s">        mode: host</span>
</span><span class='line'><span class="s">    deploy:</span>
</span><span class='line'><span class="s">      mode: global</span>
</span><span class='line'><span class="s">      placement:</span>
</span><span class='line'><span class="s">        constraints:</span>
</span><span class='line'><span class="s">          - node.role == manager</span>
</span><span class='line'><span class="s">      update_config:</span>
</span><span class='line'><span class="s">        parallelism: 1</span>
</span><span class='line'><span class="s">        delay: 10s</span>
</span><span class='line'><span class="s">      restart_policy:</span>
</span><span class='line'><span class="s">        condition: on-failure</span>
</span><span class='line'><span class="s">networks:</span>
</span><span class='line'><span class="s">  appnet:</span>
</span><span class='line'><span class="s">    external: true</span>
</span><span class='line'>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create the Application Compose file, in this example we will be deploying a Ghost Blog:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>cat &gt; ghost-compose.yml <span class="s">&lt;&lt; EOF</span>
</span><span class='line'>
</span><span class='line'><span class="s">version: &#39;3.4&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">services:</span>
</span><span class='line'><span class="s">  blog:</span>
</span><span class='line'><span class="s">    image: ghost:1.22.7-alpine</span>
</span><span class='line'><span class="s">    networks:</span>
</span><span class='line'><span class="s">      - appnet</span>
</span><span class='line'><span class="s">    deploy:</span>
</span><span class='line'><span class="s">      mode: replicated</span>
</span><span class='line'><span class="s">      replicas: 1</span>
</span><span class='line'><span class="s">      placement:</span>
</span><span class='line'><span class="s">        constraints: </span>
</span><span class='line'><span class="s">          - node.role == worker</span>
</span><span class='line'><span class="s">      labels:</span>
</span><span class='line'><span class="s">        - &quot;traefik.backend.loadbalancer.sticky=false&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.backend.loadbalancer.swarm=true&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.backend=blog-1&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.docker.network=appnet&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.entrypoints=https&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.frontend.passHostHeader=true&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.frontend.rule=Host:blog.example.com&quot;</span>
</span><span class='line'><span class="s">        - &quot;traefik.port=2368&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">networks:</span>
</span><span class='line'><span class="s">  appnet:</span>
</span><span class='line'><span class="s">    external: true</span>
</span><span class='line'>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Prepare the Path for Traefik:</h2>

<p>We have a <a href="https://sysadmins.co.za/tag/glusterfs/">replicated volume</a> under our <code>/mnt</code> partition, so that all our managers can read from that path, create the file and provide the sufficient permissions:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir -p /mnt/traefik
</span><span class='line'><span class="nv">$ </span>touch /mnt/traefik/acme.json
</span><span class='line'><span class="nv">$ </span>chmod <span class="m">600</span> /mnt/traefik/acme.json
</span></code></pre></td></tr></table></div></figure>


<h2>Deploy the Stacks:</h2>

<p>Deploy the Traefik Stack:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker stack deploy -c traefik-compose.yml traefik
</span></code></pre></td></tr></table></div></figure>


<p>Wait until the services are deployed:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker stack services traefik
</span><span class='line'>ID                  NAME                MODE                REPLICAS            IMAGE               PORTS
</span><span class='line'>f8ru5gbcgd2v        traefik_proxy       global              3/3                 traefik:latest
</span></code></pre></td></tr></table></div></figure>


<p>Deploy the Application Stack:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker stack deploy -c ghost-compose.yml apps
</span></code></pre></td></tr></table></div></figure>


<p>Verify that the Application Stack has been deployed:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker stack services apps
</span><span class='line'>ID                  NAME                MODE                REPLICAS            IMAGE                          PORTS
</span><span class='line'>516zlfs2cfdv        apps_blog           replicated          1/1                 ghost:1.22.7-alpine
</span></code></pre></td></tr></table></div></figure>


<p>At the moment we will have 2 stacks in our Swarm:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker stack ls
</span><span class='line'>NAME                SERVICES
</span><span class='line'>apps                1
</span><span class='line'>traefik             1
</span></code></pre></td></tr></table></div></figure>


<h2>Test the Application:</h2>

<p>Let&rsquo;s test our blog to see if we get redirected to <a href="HTTPS:">HTTPS:</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>curl -iL http://blog.example.com
</span><span class='line'>HTTP/1.1 <span class="m">302</span> Found
</span><span class='line'>Location: https://blog.example.com:443/
</span><span class='line'>Date: Mon, <span class="m">28</span> May <span class="m">2018</span> 22:02:41 GMT
</span><span class='line'>Content-Length: 5
</span><span class='line'>Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
</span><span class='line'>
</span><span class='line'>HTTP/1.1 <span class="m">200</span> OK
</span><span class='line'>Cache-Control: public, max-age<span class="o">=</span>0
</span><span class='line'>Content-Type: text/html<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
</span><span class='line'>Date: Mon, <span class="m">28</span> May <span class="m">2018</span> 22:02:42 GMT
</span><span class='line'>Etag: W/<span class="s2">&quot;4166-J2ooSIa8gtTkYjbnr7vnPUFlRJI&quot;</span>
</span><span class='line'>Vary: Accept-Encoding
</span><span class='line'>X-Powered-By: Express
</span><span class='line'>Transfer-Encoding: chunked
</span></code></pre></td></tr></table></div></figure>


<p>Works like a charm! Traefik FTW!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/27/web-forms-with-python-flask-and-the-wtforms-module-with-bootstrap/">Web Forms With Python Flask and the WTForms Module With Bootstrap</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-27T17:44:41-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>5:44 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://user-images.githubusercontent.com/567298/53351527-18dc2100-392a-11e9-9e50-48f738046a68.jpg" alt="" /></p>

<p>Quick demo with Web Forms using the WTForms module in Python Flask.</p>

<script id="mNCC" language="javascript">
    medianet_width = "728";
    medianet_height = "90";
    medianet_crid = "218284798";
    medianet_versionId = "3111299"; 
  </script>


<script src="//contextual.media.net/nmedianet.js?cid=8CUD78FSV"></script>


<h2>Requirements:</h2>

<p>Install the required dependencies:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pip install flask wtforms
</span></code></pre></td></tr></table></div></figure>


<h2>Application:</h2>

<p>The Application code of the Web Forms Application. Note that we are also using validation, as we want the user to complete all the fields. I am also including a function that logs to the directory where the application is running, for previewing the data that was logged.</p>

<figure class='code'><figcaption><span>app.py</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">strftime</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">flash</span><span class="p">,</span> <span class="n">request</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">wtforms</span> <span class="kn">import</span> <span class="n">Form</span><span class="p">,</span> <span class="n">TextField</span><span class="p">,</span> <span class="n">TextAreaField</span><span class="p">,</span> <span class="n">validators</span><span class="p">,</span> <span class="n">StringField</span><span class="p">,</span> <span class="n">SubmitField</span>
</span><span class='line'>
</span><span class='line'><span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</span><span class='line'><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</span><span class='line'><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;SECRET_KEY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;SjdnUends821Jsdlkvxh391ksdODnejdDw&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">ReusableForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
</span><span class='line'>    <span class="n">name</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">&#39;Name:&#39;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">required</span><span class="p">()])</span>
</span><span class='line'>    <span class="n">surname</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">&#39;Surname:&#39;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">required</span><span class="p">()])</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">get_time</span><span class="p">():</span>
</span><span class='line'>    <span class="n">time</span> <span class="o">=</span> <span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%Y-%m-</span><span class="si">%d</span><span class="s">T%H:%M&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">time</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">write_to_disk</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
</span><span class='line'>    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;file.log&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">get_time</span><span class="p">()</span>
</span><span class='line'>    <span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;DateStamp={}, Name={}, Surname={}, Email={} </span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">,</span> <span class="n">email</span><span class="p">))</span>
</span><span class='line'>    <span class="n">data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@app.route</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;POST&#39;</span><span class="p">])</span>
</span><span class='line'><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
</span><span class='line'>    <span class="n">form</span> <span class="o">=</span> <span class="n">ReusableForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#print(form.errors)</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">&#39;POST&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="n">name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>
</span><span class='line'>        <span class="n">surname</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;surname&#39;</span><span class="p">]</span>
</span><span class='line'>  <span class="n">email</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">]</span>
</span><span class='line'>  <span class="n">password</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;password&#39;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">validate</span><span class="p">():</span>
</span><span class='line'>            <span class="n">write_to_disk</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
</span><span class='line'>            <span class="n">flash</span><span class="p">(</span><span class="s">&#39;Hello: {} {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">flash</span><span class="p">(</span><span class="s">&#39;Error: All Fields are Required&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h2>HTML Template:</h2>

<p><code>templates/index.html</code></p>

<script src="https://gist.github.com/ruanbekker/f552f1e57aeb038e8c10b148ed1e4c2b.js"></script>


<p>This will result in a basic web form like this:</p>

<p><img src="https://i.snag.gy/3x98UV.jpg" alt="" /></p>

<h2>Resources:</h2>

<ul>
<li><a href="https://getbootstrap.com/docs/4.1/components/alerts/">https://getbootstrap.com/docs/4.1/components/alerts/</a></li>
<li><a href="https://pythonspot.com/en/download-flask-examples/">https://pythonspot.com/en/download-flask-examples/</a></li>
<li><a href="https://flask-wtf.readthedocs.io/en/stable/quickstart.html">https://flask-wtf.readthedocs.io/en/stable/quickstart.html</a></li>
<li><a href="https://pythonspot.com/flask-web-forms/">https://pythonspot.com/flask-web-forms/</a></li>
</ul>


<script type="text/javascript">
  ( function() {
    if (window.CHITIKA === undefined) { window.CHITIKA = { 'units' : [] }; };
    var unit = {"calltype":"async[2]","publisher":"rbekker87","width":728,"height":90,"sid":"Chitika Default"};
    var placement_id = window.CHITIKA.units.length;
    window.CHITIKA.units.push(unit);
    document.write('<div id="chitikaAdBlock-' + placement_id + '"></div>');
}());
</script>


<script type="text/javascript" src="//cdn.chitika.net/getads.js" async></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/23/generate-random-characters-with-python-using-random-and-string-modules/">Generate Random Characters With Python Using Random and String Modules</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-23T06:29:06-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2018</span></span> <span class='time'>6:29 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When generating random characters for whatever reason, passwords, secrets-keys etc, you could use the <code>uuid</code> module, which looks like this:</p>

<figure class='code'><figcaption><span>Random String with UUID</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your string is: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span> <span class="p">)</span>
</span><span class='line'><span class="n">Your</span> <span class="n">string</span> <span class="ow">is</span><span class="p">:</span> <span class="mi">53</span><span class="n">a6e1a7</span><span class="o">-</span><span class="n">a2c7</span><span class="o">-</span><span class="mi">488</span><span class="n">e</span><span class="o">-</span><span class="n">bed9</span><span class="o">-</span><span class="n">d76662de9c5f</span>
</span></code></pre></td></tr></table></div></figure>


<p>But if you want to be more specific, like digits, letters, capitalization etc, you can use the <code>string</code> and <code>random</code> modules to do so. First we will generate a random string containing only letters:</p>

<figure class='code'><figcaption><span>Random String with letters</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">ascii_letters</span><span class="p">,</span> <span class="n">punctuation</span><span class="p">,</span> <span class="n">digits</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span><span class="p">,</span> <span class="n">randint</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="nb">min</span> <span class="o">=</span> <span class="mi">12</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="nb">max</span> <span class="o">=</span> <span class="mi">15</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">string_format</span> <span class="o">=</span> <span class="n">ascii_letters</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">generated_string</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">choice</span><span class="p">(</span><span class="n">string_format</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your String is: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">generated_string</span><span class="p">))</span>
</span><span class='line'><span class="n">Your</span> <span class="n">String</span> <span class="ow">is</span><span class="p">:</span> <span class="n">zNeUFluvZwED</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, you have a randomized string which will be always at least 12 characters and max 15 characters, which is lower and upper case. You can also use the <code>lower</code> and <code>upper</code> functions if you want to capitalize or lower case your string:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">generated_string</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span class='line'><span class="s">&#39;zneufluvzwed&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">generated_string</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</span><span class='line'><span class="s">&#39;ZNEUFLUVZWED&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s add some logic so that we can have a more randomized characters with digits, punctuations etc:</p>

<figure class='code'><figcaption><span>Random String with Letters, Punctuations and Digits</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">string</span> <span class="kn">import</span> <span class="n">ascii_letters</span><span class="p">,</span> <span class="n">punctuation</span><span class="p">,</span> <span class="n">digits</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span><span class="p">,</span> <span class="n">randint</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="nb">min</span> <span class="o">=</span> <span class="mi">12</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="nb">max</span> <span class="o">=</span> <span class="mi">15</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">string_format</span> <span class="o">=</span> <span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">punctuation</span> <span class="o">+</span> <span class="n">digits</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">generated_string</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">choice</span><span class="p">(</span><span class="n">string_format</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="nb">max</span><span class="p">)))</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;Your String is: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">generated_string</span><span class="p">))</span>
</span><span class='line'><span class="n">Your</span> <span class="n">String</span> <span class="ow">is</span><span class="p">:</span> <span class="n">Bu</span><span class="o">&gt;</span><span class="p">}</span><span class="n">x_</span><span class="o">/-</span><span class="n">H5</span><span class="p">)</span><span class="n">fLAr</span>
</span></code></pre></td></tr></table></div></figure>


<p>More <a href="https://goo.gl/G9VRpe">Python</a> related blog posts.</p>

<center>
  <script type='text/javascript' src='https://ko-fi.com/widgets/widget_2.js'></script>
  <script type='text/javascript'>kofiwidget2.init('Buy Me a Coffee', '#46b798', 'A6423ZIQ');kofiwidget2.draw();</script>
</center>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/09/manage-scaleway-instances-via-their-api-like-a-boss-with-their-command-line-tool-scw/">Manage Scaleway Instances via Their API Like a Boss With Their Command Line Tool Scw</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-09T12:31:11-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>12:31 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://preview.ibb.co/bBRhn7/scw.png" alt="" /></p>

<p>Let&rsquo;s set things straight: I am a command line fan boy, If I can do the things I have to do with a command line interface, i&rsquo;m happy! And that means automation ftw! :D</p>

<h2>Scaleway Command Line Interface:</h2>

<p>I have been using Scaleway for about 2 years now, and absolutely loving their services! So I recently found their <a href="https://github.com/scaleway/scaleway-cli">command line interface utility: scw</a>, which is written in golang and has a very similar feel to docker.</p>

<h2>Install the SCW CLI Tool:</h2>

<p>A golang environment is needed and I will be using docker to drop myself into a golang environment and then install the scw utility:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>docker run -it golang:alpine sh
</span><span class='line'><span class="nv">$ </span>apk update
</span><span class='line'><span class="nv">$ </span>apk add openssl git openssh curl
</span><span class='line'><span class="nv">$ </span>go get -u github.com/scaleway/scaleway-cli/cmd/scw
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Verify that it was installed:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw --version
</span><span class='line'>scw version v1.16+dev, build
</span></code></pre></td></tr></table></div></figure>


<p>Awesome sauce!</p>

<h2>Authentication:</h2>

<p>When we authenticate to Scaleway, it will prompt you to upload your public ssh key, as I am doing this in a container I have no ssh keys, so therefore will generate one before I authenticate.</p>

<p>Generate the SSH Key:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh-keygen -t rsa
</span><span class='line'>Generating public/private rsa key pair.
</span><span class='line'>Enter file in which to save the key <span class="o">(</span>/root/.ssh/id_rsa<span class="o">)</span>:
</span><span class='line'>Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>:
</span><span class='line'>Enter same passphrase again:
</span><span class='line'>Your identification has been saved in /root/.ssh/id_rsa.
</span><span class='line'>Your public key has been saved in /root/.ssh/id_rsa.pub.
</span></code></pre></td></tr></table></div></figure>


<p>Now loging to Scaleway using the cli tools:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw login
</span><span class='line'>Login <span class="o">(</span>cloud.scaleway.com<span class="o">)</span>: &lt;youremail@domain.com&gt;
</span><span class='line'>Password:
</span><span class='line'>Do you want to upload an SSH key ?
</span><span class='line'><span class="o">[</span>0<span class="o">]</span> I don<span class="err">&#39;</span>t want to upload a key !
</span><span class='line'><span class="o">[</span>1<span class="o">]</span> id_rsa.pub
</span><span class='line'>Which <span class="o">[</span>id<span class="o">]</span>: 1
</span><span class='line'>
</span><span class='line'>You are now authenticated on Scaleway.com as Ruan.
</span><span class='line'>You can list your existing servers using <span class="sb">`</span>scw ps<span class="sb">`</span> or create a new one using <span class="sb">`</span>scw run ubuntu-xenial<span class="sb">`</span>.
</span><span class='line'>You can get a list of all available commands using <span class="sb">`</span>scw -h<span class="sb">`</span> and get more usage examples on github.com/scaleway/scaleway-cli.
</span><span class='line'>Happy cloud riding.
</span></code></pre></td></tr></table></div></figure>


<p>Sweeet!</p>

<p><img src="https://pics.me.me/hacker-voice-im-in-24303160.png" alt="" /></p>

<h2>Getting Info from Scaleway</h2>

<p>List Instance Types:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw products servers
</span><span class='line'>COMMERCIAL TYPE     ARCH     CPUs      RAM  BAREMETAL
</span><span class='line'>ARM64-128GB        arm64       <span class="m">64</span>   <span class="m">137</span> GB      <span class="nb">false</span>
</span><span class='line'>ARM64-16GB         arm64       <span class="m">16</span>    <span class="m">17</span> GB      <span class="nb">false</span>
</span><span class='line'>ARM64-2GB          arm64        <span class="m">4</span>   2.1 GB      <span class="nb">false</span>
</span><span class='line'>ARM64-32GB         arm64       <span class="m">32</span>    <span class="m">34</span> GB      <span class="nb">false</span>
</span><span class='line'>ARM64-4GB          arm64        <span class="m">6</span>   4.3 GB      <span class="nb">false</span>
</span><span class='line'>ARM64-64GB         arm64       <span class="m">48</span>    <span class="m">69</span> GB      <span class="nb">false</span>
</span><span class='line'>ARM64-8GB          arm64        <span class="m">8</span>   8.6 GB      <span class="nb">false</span>
</span><span class='line'>C1                   arm        <span class="m">4</span>   2.1 GB       <span class="nb">true</span>
</span><span class='line'>C2L               x86_64        <span class="m">8</span>    <span class="m">34</span> GB       <span class="nb">true</span>
</span><span class='line'>C2M               x86_64        <span class="m">8</span>    <span class="m">17</span> GB       <span class="nb">true</span>
</span><span class='line'>C2S               x86_64        <span class="m">4</span>   8.6 GB       <span class="nb">true</span>
</span><span class='line'>START1-L          x86_64        <span class="m">8</span>   8.6 GB      <span class="nb">false</span>
</span><span class='line'>START1-M          x86_64        <span class="m">4</span>   4.3 GB      <span class="nb">false</span>
</span><span class='line'>START1-S          x86_64        <span class="m">2</span>   2.1 GB      <span class="nb">false</span>
</span><span class='line'>START1-XS         x86_64        <span class="m">1</span>   1.1 GB      <span class="nb">false</span>
</span><span class='line'>VC1L              x86_64        <span class="m">6</span>   8.6 GB      <span class="nb">false</span>
</span><span class='line'>VC1M              x86_64        <span class="m">4</span>   4.3 GB      <span class="nb">false</span>
</span><span class='line'>VC1S              x86_64        <span class="m">2</span>   2.1 GB      <span class="nb">false</span>
</span><span class='line'>X64-120GB         x86_64       <span class="m">12</span>   <span class="m">129</span> GB      <span class="nb">false</span>
</span><span class='line'>X64-15GB          x86_64        <span class="m">6</span>    <span class="m">16</span> GB      <span class="nb">false</span>
</span><span class='line'>X64-30GB          x86_64        <span class="m">8</span>    <span class="m">32</span> GB      <span class="nb">false</span>
</span><span class='line'>X64-60GB          x86_64       <span class="m">10</span>    <span class="m">64</span> GB      <span class="nb">false</span>
</span></code></pre></td></tr></table></div></figure>


<p>Get a list of available Images, in my case I am just looking for Ubuntu:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw images <span class="p">|</span> grep -i ubuntu
</span><span class='line'>Ubuntu_Bionic               latest              a21bb700            <span class="m">11</span> days             <span class="o">[</span>ams1 par1<span class="o">]</span>         <span class="o">[</span>x86_64<span class="o">]</span>
</span><span class='line'>Ubuntu_Mini_Xenial_25G      latest              bc75c00b            <span class="m">13</span> days             <span class="o">[</span>ams1 par1<span class="o">]</span>         <span class="o">[</span>x86_64<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>List Running Instances:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw ps
</span><span class='line'>SERVER ID           IMAGE                       ZONE                CREATED             STATUS              PORTS               NAME                  COMMERCIAL TYPE
</span><span class='line'>abc123de            Ubuntu_Xenial_16_04_lates   ams1                <span class="m">5</span> weeks             running             xx.xx.xx.xx         scw-elasticsearch-01  ARM64-4GB
</span><span class='line'>abc456de            ruan-docker-swarm-17_03     par1                <span class="m">10</span> months           running             xx.xx.xxx.xxx       scw-swarm-manager-01  VC1M
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>List All Instances (Running, Stopped, Started, etc):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw ps -a
</span><span class='line'>SERVER ID           IMAGE                       ZONE                CREATED             STATUS              PORTS               NAME                  COMMERCIAL TYPE
</span><span class='line'>abc123df            Ubuntu_Xenial_16_04_lates   ams1                <span class="m">5</span> weeks             stopped             xx.xx.xx.xx         scw-elasticsearch-02  ARM64-4GB
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>List Instances with a filter based on its name:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw ps -f <span class="nv">name</span><span class="o">=</span>scw-swarm-worker-02
</span><span class='line'>SERVER ID           IMAGE               ZONE                CREATED             STATUS              PORTS               NAME                COMMERCIAL TYPE
</span><span class='line'>1234abcd            Ubuntu_Xenial       par1                <span class="m">8</span> minutes           running             xx.xx.xxx.xxx       scw-swarm-worker-2  START1-XS
</span></code></pre></td></tr></table></div></figure>


<p>List the Latest Instance that was created:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw ps -l
</span><span class='line'>SERVER ID           IMAGE               ZONE                CREATED             STATUS              PORTS               NAME                COMMERCIAL TYPE
</span><span class='line'>1234abce            Ubuntu_Xenial       par1                <span class="m">6</span> minutes           running             xx.xx.xxx.xxx       scw-swarm-worker-3  START1-XS
</span></code></pre></td></tr></table></div></figure>


<p></p>

<h2>Create Instances:</h2>

<p>In my scenario, I would like to create a instance named <code>docker-swarm-worker-4</code> with the instance type <code>START1-XS</code> in the Paris datacenter, and I will be using my key that I have uploaded, also the image id that I passed, was retrieved when listing for images:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw --region<span class="o">=</span>par1 create --commercial-type<span class="o">=</span>START1-XS --ip-address<span class="o">=</span>dynamic --ipv6<span class="o">=</span><span class="nb">false</span> --name<span class="o">=</span><span class="s2">&quot;docker-swarm-worker-4&quot;</span> --tmp-ssh-key<span class="o">=</span><span class="nb">false  </span>bc75c00b
</span><span class='line'>&lt;response: random uuid string&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Now that the instance is created, we can start it by calling either the name or the id:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw start docker-swarm-worker-4
</span></code></pre></td></tr></table></div></figure>


<p>To verify the status of the instance, we can do:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw ps -l
</span><span class='line'>SERVER ID           IMAGE               ZONE                CREATED             STATUS              PORTS               NAME                   COMMERCIAL TYPE
</span><span class='line'>102abc34            Ubuntu_Xenial                           <span class="m">28</span> seconds          starting                                docker-swarm-worker-4  START1-XS
</span></code></pre></td></tr></table></div></figure>


<p>At this moment it is still starting, after waiting a minute or so, run it again:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw ps -l
</span><span class='line'>SERVER ID           IMAGE               ZONE                CREATED             STATUS              PORTS               NAME                   COMMERCIAL TYPE
</span><span class='line'>102abc34            Ubuntu_Xenial       par1                About a minute      running             xx.xx.xx.xx         docker-swarm-worker-4  START1-XS
</span></code></pre></td></tr></table></div></figure>


<p>As we can see its in a running state, so we are good to access our instance. You have 2 options to access your server, via exec and ssh.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw <span class="nb">exec </span>docker-swarm-worker-4 /bin/bash
</span><span class='line'>root@docker-swarm-worker-4:~
</span></code></pre></td></tr></table></div></figure>


<p>or via SSH:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ssh root@xx.xx.xx.xx
</span><span class='line'>root@docker-swarm-worker-4:~
</span></code></pre></td></tr></table></div></figure>


<p>If you would like to access your server without uploading your SSH key to your account, you can pass <code>--tmp-ssh-key=true</code> as in:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw --region<span class="o">=</span>par1 create --commercial-type<span class="o">=</span>START1-XS --ip-address<span class="o">=</span>dynamic --ipv6<span class="o">=</span><span class="nb">false</span> --name<span class="o">=</span><span class="s2">&quot;scw-temp-instance&quot;</span> --tmp-ssh-key<span class="o">=</span><span class="nb">true  </span>bc75c00b
</span></code></pre></td></tr></table></div></figure>


<h2>Terminating Resources:</h2>

<p>This wil stop, terminate the instance with the associated volumes and reserved ip</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw stop --terminate<span class="o">=</span><span class="nb">true </span>scw-temp-instance
</span><span class='line'>scw-temp-instance
</span></code></pre></td></tr></table></div></figure>


<p>If you had to remove a volume that is not needed, or unused:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw rmi <span class="nb">test</span>-1-snapshot-&lt;long-string&gt;--2018-04-26_12:42
</span></code></pre></td></tr></table></div></figure>


<p>To logout:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scw <span class="nb">logout</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Resources:</h2>

<p>Have a look at <a href="https://github.com/scaleway/scaleway-cli">Scaleway-CLI Documentation</a> and their <a href="https://www.scaleway.com/">Website</a> for more info, and have a look at their new <code>START1-XS</code> instance types, that is only 1.99 Euro&rsquo;s, that is insane!</p>

<p>Personally love what they are doing, feel free to head over to their <a href="https://www.scaleway.com/pricing/">pricing page</a> to see some sweet deals!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/09/temporary-iam-credentials-from-ec2-instance-metadata-using-python/">Temporary IAM Credentials From EC2 Instance Metadata Using Python</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-09T12:14:11-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>12:14 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>From a Best Practice Perspective its good not having to pass sensitive information around, and especially not hard coding them.</p>

<h2>Best Practice: Security</h2>

<p>One good way is to use SSM with KMS to Encrypt/Decrypt them, but since EC2 has a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html">Metadata Service</a> available, we can make use of that to retrieve <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html">temporary credentials</a>. One requirement though, is that the instance will require an IAM Role where the code will be executed on. The IAM Role also needs to have sufficient privileges to be able to execute, whatever you need to do.</p>

<p>The <a href="https://12factor.net/">12 Factor</a> Methodology however states to use config in your environment variables, but from the application logic, its easy to save it in our environment.</p>

<h2>Scenario: Applications on AWS EC2</h2>

<p>When you run applications on Amazon EC2 the nodes has access to the EC2 Metadata Service, so in this case our IAM Role has a Policy that authorizes GetItem on our DynamoDB table, therefore we can define our code with no sensitive information, as the code will do all the work to get the credentials and use the credentials to access DynamoDB.</p>

<h2>Use Temporary Credentials to Read from DynamoDB using botocore</h2>

<p>In this example we will get the temporary credentials from the metadata service, then define the temporary credentials in our session to authorize our request against dynamodb to read from our table:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">boto3</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">botocore.utils</span> <span class="kn">import</span> <span class="n">InstanceMetadataFetcher</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">botocore.credentials</span> <span class="kn">import</span> <span class="n">InstanceMetadataProvider</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">provider</span> <span class="o">=</span> <span class="n">InstanceMetadataProvider</span><span class="p">(</span><span class="n">iam_role_fetcher</span><span class="o">=</span><span class="n">InstanceMetadataFetcher</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">num_attempts</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">creds</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">session</span> <span class="o">=</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span>
</span><span class='line'>    <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">creds</span><span class="o">.</span><span class="n">access_key</span><span class="p">,</span>
</span><span class='line'>    <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">creds</span><span class="o">.</span><span class="n">secret_key</span><span class="p">,</span>
</span><span class='line'>    <span class="n">aws_session_token</span><span class="o">=</span><span class="n">creds</span><span class="o">.</span><span class="n">token</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">ddb</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s">&#39;dynamodb&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">ddb</span><span class="o">.</span><span class="n">get_item</span><span class="p">(</span>
</span><span class='line'>    <span class="n">TableName</span><span class="o">=</span><span class="s">&#39;my-dynamodb-table&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="n">Key</span><span class="o">=</span><span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;node_type&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="s">&#39;S&#39;</span><span class="p">:</span> <span class="s">&#39;primary_manager&#39;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;Item&#39;</span><span class="p">][</span><span class="s">&#39;ip&#39;</span><span class="p">][</span><span class="s">&#39;S&#39;</span><span class="p">])</span>
</span><span class='line'><span class="s">&#39;10.0.0.32</span>
</span></code></pre></td></tr></table></div></figure>


<p>Also, when you are logged onto the EC2 instance, you can use curl to see the temporary credentials information:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ iam_role_name</span><span class="o">=</span><span class="k">$(</span>curl -s http://169.254.169.254/latest/meta-data/iam/security-credentials/<span class="k">)</span>
</span><span class='line'><span class="nv">$ </span>curl -s http://169.254.169.254/latest/meta-data/iam/security-credentials/<span class="k">${</span><span class="nv">iam_role_name</span><span class="k">}</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>  <span class="s2">&quot;Code&quot;</span> : <span class="s2">&quot;Success&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;LastUpdated&quot;</span> : <span class="s2">&quot;2018-05-09T14:25:48Z&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;Type&quot;</span> : <span class="s2">&quot;AWS-HMAC&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;AccessKeyId&quot;</span> : <span class="s2">&quot;&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;SecretAccessKey&quot;</span> : <span class="s2">&quot;&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;Token&quot;</span> : <span class="s2">&quot;&quot;</span>,
</span><span class='line'>  <span class="s2">&quot;Expiration&quot;</span> : <span class="s2">&quot;2018-05-09T20:46:55Z&quot;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Another method is boto3 Session:</h2>

<p>You can also use boto3.Session to achieve this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt;&gt;&gt; <span class="nv">session</span> <span class="o">=</span> boto3.Session<span class="o">(</span><span class="nv">region_name</span><span class="o">=</span><span class="s1">&#39;eu-west-1&#39;</span><span class="o">)</span>
</span><span class='line'>&gt;&gt;&gt; <span class="nv">credentials</span> <span class="o">=</span> session.get_credentials<span class="o">()</span>
</span><span class='line'>&gt;&gt;&gt; <span class="nv">credentials</span> <span class="o">=</span> credentials.get_frozen_credentials<span class="o">()</span>
</span><span class='line'>&gt;&gt;&gt; credentials.access_key
</span><span class='line'>u<span class="s1">&#39;ABC...&#39;</span>
</span><span class='line'>&gt;&gt;&gt; credentials.secret_key
</span><span class='line'>u<span class="s1">&#39;DEF...&#39;</span>
</span><span class='line'>&gt;&gt;&gt; credentials.token
</span><span class='line'>u<span class="s1">&#39;ZXC...&#39;</span>
</span><span class='line'>&gt;&gt;&gt; <span class="nv">access_key</span> <span class="o">=</span> credentials.access_key
</span><span class='line'>&gt;&gt;&gt; <span class="nv">secret_key</span> <span class="o">=</span> credentials.secret_key
</span><span class='line'>&gt;&gt;&gt; <span class="nv">ddb</span> <span class="o">=</span> session.client<span class="o">(</span><span class="s1">&#39;dynamodb&#39;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2018/05/08/use-python-requests-to-interact-with-the-itunes-api-to-search-for-music-info/">Use Python Requests to Interact With the iTunes API to Search for Music Info</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2018-05-08T17:01:11-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2018</span></span> <span class='time'>5:01 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Tutorial on using Python Requests and using Apple iTunes Music API, where we will be doing the following:</p>

<ul>
<li>Basics of using the Requests module</li>
<li>Query iTunes API on Songs by Artist</li>
<li>Query iTunes API on Artists Info</li>
<li>Query iTunes API on All Albums by Artist</li>
<li>Query iTunes API on Top 5 Albums</li>
<li>Query iTunes API on Multipe Artists</li>
</ul>


<h2>Resources:</h2>

<ul>
<li><a href="http://docs.python-requests.org/en/master/">Python Requests</a></li>
<li><a href="https://affiliate.itunes.apple.com/resources/documentation/itunes-store-web-service-search-api/">iTunes API</a></li>
</ul>


<h2>Install the Request Module:</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ virtualenv -p /usr/bin/python .venv
</span><span class='line'>$ source .venv/bin/activate
</span><span class='line'>$ pip install requests</span></code></pre></td></tr></table></div></figure>


<h2>Basic Usage of Requests:</h2>

<p>In this demonstration we will only use the GET HTTP Method.</p>

<p>Make the GET Request to the endpoint:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">requests</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;https://itunes.apple.com/search?term=guns+and+roses&amp;limit=1&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>View the HTTP Status Code of the Response:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
</span><span class='line'><span class="mi">200</span>
</span></code></pre></td></tr></table></div></figure>


<p>To view some of the status codes of the request library:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span>
</span><span class='line'><span class="mi">200</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">no_content</span>
</span><span class='line'><span class="mi">204</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">temporary_redirect</span>
</span><span class='line'><span class="mi">307</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">permanent_redirect</span>
</span><span class='line'><span class="mi">308</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">bad</span>
</span><span class='line'><span class="mi">400</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">not_found</span>
</span><span class='line'><span class="mi">404</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">bad_gateway</span>
</span><span class='line'><span class="mi">502</span>
</span></code></pre></td></tr></table></div></figure>


<p>Call <code>.ok</code> for the status lookup, the boolean answer will indicate if it responded with a <code>200 OK</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span>
</span><span class='line'><span class="bp">True</span>
</span></code></pre></td></tr></table></div></figure>


<p>Measure the amount of time the request took:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">elapsed</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
</span><span class='line'><span class="mf">0.706043</span>
</span></code></pre></td></tr></table></div></figure>


<p>View the content of the response:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span>
</span><span class='line'><span class="s">&#39;</span><span class="se">\n\n\n</span><span class="s">{</span><span class="se">\n</span><span class="s"> &quot;resultCount&quot;:1,</span><span class="se">\n</span><span class="s"> &quot;results&quot;: [</span><span class="se">\n</span><span class="s">{&quot;wrapperType&quot;:&quot;track&quot;, &quot;kind&quot;:&quot;song&quot;, &quot;artistId&quot;:106621, &quot;collectionId&quot;:5669937, &quot;trackId&quot;:5669911, &quot;artistName&quot;:&quot;Guns N</span><span class="se">\&#39;</span><span class="s"> Roses&quot;, &quot;collectionName&quot;:&quot;Greatest Hits&quot;, &quot;trackName&quot;:&quot;Sweet Child O</span><span class="se">\&#39;</span><span class="s"> Mine&quot;, &quot;collectionCensoredName&quot;:&quot;Greatest Hits&quot;, &quot;trackCensoredName&quot;:&quot;Sweet Child O</span><span class="se">\&#39;</span><span class="s"> Mine&quot;, &quot;artistViewUrl&quot;:&quot;https://itunes.apple.com/us/artist/guns-n-roses/106621?uo=4&quot;, &quot;collectionViewUrl&quot;:&quot;https://itunes.apple.com/us/album/sweet-child-o-mine/5669937?i=5669911&amp;uo=4&quot;, &quot;trackViewUrl&quot;:&quot;https://itunes.apple.com/us/album/sweet-child-o-mine/5669937?i=5669911&amp;uo=4&quot;, </span><span class="se">\n</span><span class="s">&quot;previewUrl&quot;:&quot;https://audio-ssl.itunes.apple.com/apple-assets-us-std-000001/Music6/v4/f2/7d/73/f27d7346-de92-bdc6-e148-56a3da406005/mzaf_2747902348777129728.plus.aac.p.m4a&quot;, &quot;artworkUrl30&quot;:&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/30x30bb.jpg&quot;, &quot;artworkUrl60&quot;:&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/60x60bb.jpg&quot;, &quot;artworkUrl100&quot;:&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/100x100bb.jpg&quot;, &quot;collectionPrice&quot;:9.99, &quot;trackPrice&quot;:1.29, &quot;releaseDate&quot;:&quot;1987-07-21T07:00:00Z&quot;, &quot;collectionExplicitness&quot;:&quot;notExplicit&quot;, &quot;trackExplicitness&quot;:&quot;notExplicit&quot;, &quot;discCount&quot;:1, &quot;discNumber&quot;:1, &quot;trackCount&quot;:14, &quot;trackNumber&quot;:2, &quot;trackTimeMillis&quot;:355267, &quot;country&quot;:&quot;USA&quot;, &quot;currency&quot;:&quot;USD&quot;, &quot;primaryGenreName&quot;:&quot;Rock&quot;, &quot;isStreamable&quot;:true}]</span><span class="se">\n</span><span class="s">}</span><span class="se">\n\n\n</span><span class="s">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>View the content in json format:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span><span class="s">u&#39;resultCount&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">u&#39;results&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">u&#39;collectionExplicitness&#39;</span><span class="p">:</span> <span class="s">u&#39;notExplicit&#39;</span><span class="p">,</span> <span class="s">u&#39;releaseDate&#39;</span><span class="p">:</span> <span class="s">u&#39;1987-07-21T07:00:00Z&#39;</span><span class="p">,</span> <span class="s">u&#39;currency&#39;</span><span class="p">:</span> <span class="s">u&#39;USD&#39;</span><span class="p">,</span> <span class="s">u&#39;artistId&#39;</span><span class="p">:</span> <span class="mi">106621</span><span class="p">,</span> <span class="s">u&#39;previewUrl&#39;</span><span class="p">:</span> <span class="s">u&#39;https://audio-ssl.itunes.apple.com/apple-assets-us-std-000001/Music6/v4/f2/7d/73/f27d7346-de92-bdc6-e148-56a3da406005/mzaf_2747902348777129728.plus.aac.p.m4a&#39;</span><span class="p">,</span> <span class="s">u&#39;trackPrice&#39;</span><span class="p">:</span> <span class="mf">1.29</span><span class="p">,</span> <span class="s">u&#39;isStreamable&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">u&#39;trackViewUrl&#39;</span><span class="p">:</span> <span class="s">u&#39;https://itunes.apple.com/us/album/sweet-child-o-mine/5669937?i=5669911&amp;uo=4&#39;</span><span class="p">,</span> <span class="s">u&#39;collectionName&#39;</span><span class="p">:</span> <span class="s">u&#39;Greatest Hits&#39;</span><span class="p">,</span> <span class="s">u&#39;collectionId&#39;</span><span class="p">:</span> <span class="mi">5669937</span><span class="p">,</span> <span class="s">u&#39;trackId&#39;</span><span class="p">:</span> <span class="mi">5669911</span><span class="p">,</span> <span class="s">u&#39;collectionViewUrl&#39;</span><span class="p">:</span> <span class="s">u&#39;https://itunes.apple.com/us/album/sweet-child-o-mine/5669937?i=5669911&amp;uo=4&#39;</span><span class="p">,</span> <span class="s">u&#39;trackCount&#39;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s">u&#39;trackNumber&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">u&#39;discNumber&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">u&#39;collectionPrice&#39;</span><span class="p">:</span> <span class="mf">9.99</span><span class="p">,</span> <span class="s">u&#39;trackCensoredName&#39;</span><span class="p">:</span> <span class="s">u&quot;Sweet Child O&#39; Mine&quot;</span><span class="p">,</span> <span class="s">u&#39;trackName&#39;</span><span class="p">:</span> <span class="s">u&quot;Sweet Child O&#39; Mine&quot;</span><span class="p">,</span> <span class="s">u&#39;trackTimeMillis&#39;</span><span class="p">:</span> <span class="mi">355267</span><span class="p">,</span> <span class="s">u&#39;primaryGenreName&#39;</span><span class="p">:</span> <span class="s">u&#39;Rock&#39;</span><span class="p">,</span> <span class="s">u&#39;artistViewUrl&#39;</span><span class="p">:</span> <span class="s">u&#39;https://itunes.apple.com/us/artist/guns-n-roses/106621?uo=4&#39;</span><span class="p">,</span> <span class="s">u&#39;kind&#39;</span><span class="p">:</span> <span class="s">u&#39;song&#39;</span><span class="p">,</span> <span class="s">u&#39;country&#39;</span><span class="p">:</span> <span class="s">u&#39;USA&#39;</span><span class="p">,</span> <span class="s">u&#39;wrapperType&#39;</span><span class="p">:</span> <span class="s">u&#39;track&#39;</span><span class="p">,</span> <span class="s">u&#39;artworkUrl100&#39;</span><span class="p">:</span> <span class="s">u&#39;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/100x100bb.jpg&#39;</span><span class="p">,</span> <span class="s">u&#39;collectionCensoredName&#39;</span><span class="p">:</span> <span class="s">u&#39;Greatest Hits&#39;</span><span class="p">,</span> <span class="s">u&#39;artistName&#39;</span><span class="p">:</span> <span class="s">u&quot;Guns N&#39; Roses&quot;</span><span class="p">,</span> <span class="s">u&#39;artworkUrl60&#39;</span><span class="p">:</span> <span class="s">u&#39;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/60x60bb.jpg&#39;</span><span class="p">,</span> <span class="s">u&#39;trackExplicitness&#39;</span><span class="p">:</span> <span class="s">u&#39;notExplicit&#39;</span><span class="p">,</span> <span class="s">u&#39;artworkUrl30&#39;</span><span class="p">:</span> <span class="s">u&#39;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/30x30bb.jpg&#39;</span><span class="p">,</span> <span class="s">u&#39;discCount&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}]}</span>
</span></code></pre></td></tr></table></div></figure>


<p>View the request headers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span>
</span><span class='line'><span class="p">{</span><span class="s">&#39;Content-Length&#39;</span><span class="p">:</span> <span class="s">&#39;650&#39;</span><span class="p">,</span> <span class="s">&#39;x-apple-translated-wo-url&#39;</span><span class="p">:</span> <span class="s">&#39;/WebObjects/MZStoreServices.woa/ws/wsSearch?term=guns+and+roses&amp;limit=1&amp;urlDesc=&#39;</span><span class="p">,</span> <span class="s">&#39;Access-Control-Allow-Origin&#39;</span><span class="p">:</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;x-webobjects-loadaverage&#39;</span><span class="p">:</span> <span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;X-Cache&#39;</span><span class="p">:</span> <span class="s">&#39;TCP_MISS from a2-21-98-60.deploy.akamaitechnologies.com (AkamaiGHost/9.3.0.3-22245996) (-)&#39;</span><span class="p">,</span> <span class="s">&#39;x-content-type-options&#39;</span><span class="p">:</span> <span class="s">&#39;nosniff&#39;</span><span class="p">,</span> <span class="s">&#39;x-apple-orig-url&#39;</span><span class="p">:</span> <span class="s">&#39;https://itunes.apple.com/search?term=guns+and+roses&amp;limit=1&#39;</span><span class="p">,</span> <span class="s">&#39;x-apple-jingle-correlation-key&#39;</span><span class="p">:</span> <span class="s">&#39;GUOFR25MGUUK5J7LUKI6UUFUWM&#39;</span><span class="p">,</span> <span class="s">&#39;x-apple-application-site&#39;</span><span class="p">:</span> <span class="s">&#39;ST11&#39;</span><span class="p">,</span> <span class="s">&#39;Date&#39;</span><span class="p">:</span> <span class="s">&#39;Tue, 08 May 2018 20:50:39 GMT&#39;</span><span class="p">,</span> <span class="s">&#39;apple-tk&#39;</span><span class="p">:</span> <span class="s">&#39;false&#39;</span><span class="p">,</span> <span class="s">&#39;content-disposition&#39;</span><span class="p">:</span> <span class="s">&#39;attachment; filename=1.txt&#39;</span><span class="p">,</span> <span class="s">&#39;Connection&#39;</span><span class="p">:</span> <span class="s">&#39;keep-alive&#39;</span><span class="p">,</span> <span class="s">&#39;apple-seq&#39;</span><span class="p">:</span> <span class="s">&#39;0&#39;</span><span class="p">,</span> <span class="s">&#39;x-apple-application-instance&#39;</span><span class="p">:</span> <span class="s">&#39;2001318&#39;</span><span class="p">,</span> <span class="s">&#39;X-Apple-Partner&#39;</span><span class="p">:</span> <span class="s">&#39;origin.0&#39;</span><span class="p">,</span> <span class="s">&#39;Content-Encoding&#39;</span><span class="p">:</span> <span class="s">&#39;gzip&#39;</span><span class="p">,</span> <span class="s">&#39;strict-transport-security&#39;</span><span class="p">:</span> <span class="s">&#39;max-age=31536000&#39;</span><span class="p">,</span> <span class="s">&#39;Vary&#39;</span><span class="p">:</span> <span class="s">&#39;Accept-Encoding&#39;</span><span class="p">,</span> <span class="s">&#39;apple-timing-app&#39;</span><span class="p">:</span> <span class="s">&#39;109 ms&#39;</span><span class="p">,</span> <span class="s">&#39;X-True-Cache-Key&#39;</span><span class="p">:</span> <span class="s">&#39;/L/itunes.apple.com/search ci2=limit=1&amp;term=guns+and+roses__&#39;</span><span class="p">,</span> <span class="s">&#39;X-Cache-Remote&#39;</span><span class="p">:</span> <span class="s">&#39;TCP_MISS from a23-57-75-64.deploy.akamaitechnologies.com (AkamaiGHost/9.3.0.3-22245996) (-)&#39;</span><span class="p">,</span> <span class="s">&#39;Cache-Control&#39;</span><span class="p">:</span> <span class="s">&#39;max-age=86400&#39;</span><span class="p">,</span> <span class="s">&#39;x-apple-request-uuid&#39;</span><span class="p">:</span> <span class="s">&#39;351c58eb-ac35-28ae-a7eb-a291ea50b4b3&#39;</span><span class="p">,</span> <span class="s">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s">&#39;text/javascript; charset=utf-8&#39;</span><span class="p">,</span> <span class="s">&#39;apple-originating-system&#39;</span><span class="p">:</span> <span class="s">&#39;MZStoreServices&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Python Requests and the iTunes API:</h2>

<p>Search for the Artist Guns and Roses and limit the output to 1 Song:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">requests</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">json</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/search?term=guns+and+roses&amp;limit=1&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s">&quot;resultCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;collectionExplicitness&quot;</span><span class="p">:</span> <span class="s">&quot;notExplicit&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;releaseDate&quot;</span><span class="p">:</span> <span class="s">&quot;1987-07-21T07:00:00Z&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;currency&quot;</span><span class="p">:</span> <span class="s">&quot;USD&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">106621</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;previewUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://audio-ssl.itunes.apple.com/apple-assets-us-std-000001/Music6/v4/f2/7d/73/f27d7346-de92-bdc6-e148-56a3da406005/mzaf_2747902348777129728.plus.aac.p.m4a&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackPrice&quot;</span><span class="p">:</span> <span class="mf">1.29</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;isStreamable&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackViewUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/album/sweet-child-o-mine/5669937?i=5669911&amp;uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionName&quot;</span><span class="p">:</span> <span class="s">&quot;Greatest Hits&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionId&quot;</span><span class="p">:</span> <span class="mi">5669937</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackId&quot;</span><span class="p">:</span> <span class="mi">5669911</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionViewUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/album/sweet-child-o-mine/5669937?i=5669911&amp;uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackCount&quot;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackNumber&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;discNumber&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionPrice&quot;</span><span class="p">:</span> <span class="mf">9.99</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackCensoredName&quot;</span><span class="p">:</span> <span class="s">&quot;Sweet Child O&#39; Mine&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackName&quot;</span><span class="p">:</span> <span class="s">&quot;Sweet Child O&#39; Mine&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackTimeMillis&quot;</span><span class="p">:</span> <span class="mi">355267</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistViewUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/guns-n-roses/106621?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;kind&quot;</span><span class="p">:</span> <span class="s">&quot;song&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;country&quot;</span><span class="p">:</span> <span class="s">&quot;USA&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;track&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artworkUrl100&quot;</span><span class="p">:</span> <span class="s">&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/100x100bb.jpg&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionCensoredName&quot;</span><span class="p">:</span> <span class="s">&quot;Greatest Hits&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;Guns N&#39; Roses&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artworkUrl60&quot;</span><span class="p">:</span> <span class="s">&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/60x60bb.jpg&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackExplicitness&quot;</span><span class="p">:</span> <span class="s">&quot;notExplicit&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artworkUrl30&quot;</span><span class="p">:</span> <span class="s">&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/30x30bb.jpg&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;discCount&quot;</span><span class="p">:</span> <span class="mi">1</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>From the response we got a <code>"artistId": 106621</code>, lets query the API on the ArtistId, to get info of the Artist:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/lookup?id=106621&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s">&quot;resultCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;artistType&quot;</span><span class="p">:</span> <span class="s">&quot;Artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;amgArtistId&quot;</span><span class="p">:</span> <span class="mi">4416</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">106621</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistLinkUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/guns-n-roses/106621?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;Guns N&#39; Roses&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreId&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Query all the Albums by Artist by using the ArtistId and Entity for Album:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/lookup?id=106621&amp;entity=album&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s">&quot;resultCount&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;artistType&quot;</span><span class="p">:</span> <span class="s">&quot;Artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;amgArtistId&quot;</span><span class="p">:</span> <span class="mi">4416</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">106621</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistLinkUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/guns-n-roses/106621?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;Guns N&#39; Roses&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreId&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;artistViewUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/guns-n-roses/106621?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;releaseDate&quot;</span><span class="p">:</span> <span class="s">&quot;2004-01-01T08:00:00Z&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionType&quot;</span><span class="p">:</span> <span class="s">&quot;Compilation&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionName&quot;</span><span class="p">:</span> <span class="s">&quot;Greatest Hits&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;amgArtistId&quot;</span><span class="p">:</span> <span class="mi">4416</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;copyright&quot;</span><span class="p">:</span> <span class="s">&quot;</span><span class="se">\u2117</span><span class="s"> 2004 Geffen Records&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionId&quot;</span><span class="p">:</span> <span class="mi">5669937</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artworkUrl60&quot;</span><span class="p">:</span> <span class="s">&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/60x60bb.jpg&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;collection&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionViewUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/album/greatest-hits/5669937?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">106621</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionCensoredName&quot;</span><span class="p">:</span> <span class="s">&quot;Greatest Hits&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artworkUrl100&quot;</span><span class="p">:</span> <span class="s">&quot;https://is3-ssl.mzstatic.com/image/thumb/Music/v4/3c/18/87/3c188735-e462-3c99-92eb-50fb06afa73f/source/100x100bb.jpg&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;trackCount&quot;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;currency&quot;</span><span class="p">:</span> <span class="s">&quot;USD&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;Guns N&#39; Roses&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;country&quot;</span><span class="p">:</span> <span class="s">&quot;USA&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionExplicitness&quot;</span><span class="p">:</span> <span class="s">&quot;notExplicit&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;collectionPrice&quot;</span><span class="p">:</span> <span class="mf">9.99</span>
</span><span class='line'>    <span class="p">},</span>
</span></code></pre></td></tr></table></div></figure>


<p>Get the Top 5 Albums by the Artist:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/lookup?id=106621&amp;entity=album&amp;limit=5&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>How to get AMG ID (all music id):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/search?term=jack+johnson&amp;limit=2&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s">&quot;resultCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;collectionExplicitness&quot;</span><span class="p">:</span> <span class="s">&quot;notExplicit&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;releaseDate&quot;</span><span class="p">:</span> <span class="s">&quot;2005-03-01T08:00:00Z&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;currency&quot;</span><span class="p">:</span> <span class="s">&quot;USD&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">909253</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>Query Multiple Artists by using the amgId&rsquo;s:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/lookup?amgArtistId=468749,5723&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s">&quot;resultCount&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;artistType&quot;</span><span class="p">:</span> <span class="s">&quot;Artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;amgArtistId&quot;</span><span class="p">:</span> <span class="mi">468749</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">909253</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistLinkUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/jack-johnson/909253?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;Jack Johnson&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreId&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;artistType&quot;</span><span class="p">:</span> <span class="s">&quot;Artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;amgArtistId&quot;</span><span class="p">:</span> <span class="mi">5723</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">78500</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistLinkUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/u2/78500?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;U2&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreId&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If we Query the ArtistId from the previous response we will get the same artist:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;https://itunes.apple.com/lookup?id=909253&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s">&quot;resultCount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>  <span class="s">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="s">&quot;artistType&quot;</span><span class="p">:</span> <span class="s">&quot;Artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;amgArtistId&quot;</span><span class="p">:</span> <span class="mi">468749</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;wrapperType&quot;</span><span class="p">:</span> <span class="s">&quot;artist&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistId&quot;</span><span class="p">:</span> <span class="mi">909253</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistLinkUrl&quot;</span><span class="p">:</span> <span class="s">&quot;https://itunes.apple.com/us/artist/jack-johnson/909253?uo=4&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;artistName&quot;</span><span class="p">:</span> <span class="s">&quot;Jack Johnson&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreId&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
</span><span class='line'>      <span class="s">&quot;primaryGenreName&quot;</span><span class="p">:</span> <span class="s">&quot;Rock&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Only get the Artist Name:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;</span> <span class="n">b</span>
</span><span class='line'><span class="p">{</span><span class="s">u&#39;resultCount&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">u&#39;results&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">u&#39;artistType&#39;</span><span class="p">:</span> <span class="s">u&#39;Artist&#39;</span><span class="p">,</span> <span class="s">u&#39;amgArtistId&#39;</span><span class="p">:</span> <span class="mi">468749</span><span class="p">,</span> <span class="s">u&#39;wrapperType&#39;</span><span class="p">:</span> <span class="s">u&#39;artist&#39;</span><span class="p">,</span> <span class="s">u&#39;artistId&#39;</span><span class="p">:</span> <span class="mi">909253</span><span class="p">,</span> <span class="s">u&#39;artistLinkUrl&#39;</span><span class="p">:</span> <span class="s">u&#39;https://itunes.apple.com/us/artist/jack-johnson/909253?uo=4&#39;</span><span class="p">,</span> <span class="s">u&#39;artistName&#39;</span><span class="p">:</span> <span class="s">u&#39;Jack Johnson&#39;</span><span class="p">,</span> <span class="s">u&#39;primaryGenreId&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s">u&#39;primaryGenreName&#39;</span><span class="p">:</span> <span class="s">u&#39;Rock&#39;</span><span class="p">}]}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="p">[</span><span class="s">&#39;results&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;artistName&#39;</span><span class="p">]</span>
</span><span class='line'><span class="s">u&#39;Jack Johnson&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Printing out the Artist Name and Genre with String Formatting:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">&#39;Artist: {artist_name}, Genre: {genre_name}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">artist_name</span><span class="o">=</span><span class="n">b</span><span class="p">[</span><span class="s">&#39;results&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;artistName&#39;</span><span class="p">],</span> <span class="n">genre_name</span><span class="o">=</span><span class="n">b</span><span class="p">[</span><span class="s">&#39;results&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;primaryGenreName&#39;</span><span class="p">]))</span>
</span><span class='line'><span class="n">Artist</span><span class="p">:</span> <span class="n">Jack</span> <span class="n">Johnson</span><span class="p">,</span> <span class="n">Genre</span><span class="p">:</span> <span class="n">Rock</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/25">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/23">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Subscribe</h1>
  <!-- Begin MailChimp Signup Form -->
  <div id="mc_embed_signup">
  <form action="https://sysadmins.us15.list-manage.com/subscribe/post?u=3dfcff447b6ee598231eeb658&amp;id=3542f323a9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <div class="indicates-required"><span class="asterisk"></span></div>
      <div class="mc-field-group">
	<label for="mce-EMAIL">Email Address:  <span class="asterisk"></span>
        </label>
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
        </div>
	<div id="mce-responses" class="clear">
	  <div class="response" id="mce-error-response" style="display:none"></div>
	  <div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3dfcff447b6ee598231eeb658_3542f323a9" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
  </form>
</div>
<!--End mc_embed_signup-->
</section>

<section>
  <h1>Slack</h1>
  Join me on <a href="http://linux-hackers.slack.com">Slack</a>
</section>

<section>
  <h1>Twitter</h1>
  Follow me on Twitter: <a href="https://twitter.com/ruanbekker">@ruanbekker</a>
</section>

<section>
  <h1>Say Hi!</h1>
  Send me a note using the <a href="https://saythanks.io/to/ruanbekker">saythanks.io</a> project.
</section>

<section>
  <h1>Newsletter</h1>
  View my newsletter on <a href="http://digests.ruanbekker.com/?via=ruanbekker-blog" target="_blank">digests.ruanbekker.com</a>
</section>

<section>
  <h1>Cheetsheet Repository</h1>
  Have a look at my <strong>Cheetsheets Github Repository</strong>:
  <p></p>
  <a href="https://github.com/ruanbekker/cheatsheets" target="_blank"><img src="https://user-images.githubusercontent.com/567298/169719365-1d8a05e2-a0d3-4078-a84f-c691544e4b8f.png" width="480" height="240"></a>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2022/06/15/how-to-persist-iptables-rules-after-reboots/">How to Persist Iptables Rules After Reboots</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/06/14/how-to-read-and-write-json-data-with-python/">How to Read and Write Json Data With Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/31/setup-linkding-bookmarks-manager-on-docker/">Setup Linkding Bookmarks Manager on Docker</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/31/python-flask-forms-with-jinja-templating/">Python Flask Forms With Jinja Templating</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/05/30/prometheus-relabel-config-examples/">Prometheus Relabel Config Examples</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Store</h1>
  <ul id=""></ul>
  <p></p>
  <strong>Check out my Store</strong>: Have a look at my latest elasticsearch cheatsheet in PDF format.
  <p></p>
  <a href="https://ruan.dev/store/elasticsearch-cheatsheet/?source=blog.ruanbekker.com" target="_blank"><img src="https://user-images.githubusercontent.com/567298/169719853-fe9a50a4-03f2-4a26-a422-0deb946ca09c.png" width="480" height="240"></a>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2022 - Ruan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="ruanbekker" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FFDD00" data-position="Right" data-x_margin="18" data-y_margin="18"></script>



  <li>
    <a href="https://twitter.com/ruanbekker">
      <i class="fa fa-twitter"></i> Twitter
    </a>
  </li>



  <li>
    <a href="https://github.com/ruanbekker">
      <i class="fa fa-github"></i> GitHub
    </a>
  </li>



  <li>
    <a href="https://sysadmins.co.za">
      <i class="fa fa-bars"></i> My HowTo Blog
    </a>
  </li>


</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blog-ruanbekker';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





      <script data-ad-client="ca-pub-1100086574264181" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- old
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-1543437721119411",
        enable_page_level_ads: true
      });
    </script>
    -->


</body>
</html>
